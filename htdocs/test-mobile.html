<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Mobile - JDC Auto</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
            color: white;
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        h1 { font-size: 2em; margin-bottom: 20px; text-align: center; }
        .test-item {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #fff;
        }
        .test-item h3 { margin-bottom: 10px; }
        .status { font-weight: bold; padding: 5px 10px; border-radius: 5px; display: inline-block; }
        .ok { background: #10b981; }
        .error { background: #ef4444; }
        .info { background: #3b82f6; }
        code { background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 3px; font-size: 0.9em; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üì± Test Mobile - JDC Auto</h1>
        
        <div class="test-item">
            <h3>1. Connexion au serveur</h3>
            <p>Status: <span class="status ok" id="server-status">‚úÖ Test en cours...</span></p>
            <p id="server-info"></p>
        </div>
        
        <div class="test-item">
            <h3>2. Protocole HTTPS</h3>
            <p>Status: <span class="status" id="https-status">Test en cours...</span></p>
            <p id="https-info"></p>
        </div>
        
        <div class="test-item">
            <h3>3. Chargement des assets</h3>
            <p>Status: <span class="status" id="assets-status">Test en cours...</span></p>
            <p id="assets-info"></p>
        </div>
        
        <div class="test-item">
            <h3>4. Informations navigateur</h3>
            <p id="browser-info"></p>
        </div>
        
        <div class="test-item">
            <h3>5. Test API</h3>
            <p>Status: <span class="status" id="api-status">Test en cours...</span></p>
            <p id="api-info"></p>
        </div>
    </div>
    
    <script>
        // Test 1: Serveur
        document.getElementById('server-status').textContent = '‚úÖ Connect√©';
        document.getElementById('server-status').className = 'status ok';
        document.getElementById('server-info').innerHTML = `Host: <code>${window.location.host}</code><br>URL: <code>${window.location.href}</code>`;
        
        // Test 2: HTTPS
        const isHttps = window.location.protocol === 'https:';
        const httpsStatus = document.getElementById('https-status');
        const httpsInfo = document.getElementById('https-info');
        if (isHttps) {
            httpsStatus.textContent = '‚úÖ HTTPS activ√©';
            httpsStatus.className = 'status ok';
            httpsInfo.textContent = 'Le site utilise HTTPS (s√©curis√©)';
        } else {
            httpsStatus.textContent = '‚ö†Ô∏è HTTP (non s√©curis√©)';
            httpsStatus.className = 'status info';
            httpsInfo.textContent = 'Le site utilise HTTP. HTTPS est recommand√© pour la s√©curit√©.';
        }
        
        // Test 3: Assets
        const testAsset = '/assets/index-3j5LnSdL.js';
        fetch(testAsset, { method: 'HEAD' })
            .then(response => {
                const assetsStatus = document.getElementById('assets-status');
                const assetsInfo = document.getElementById('assets-info');
                if (response.ok) {
                    assetsStatus.textContent = '‚úÖ Assets accessibles';
                    assetsStatus.className = 'status ok';
                    assetsInfo.innerHTML = `Fichier test: <code>${testAsset}</code> - Taille: ${response.headers.get('content-length') || 'N/A'} bytes`;
                } else {
                    assetsStatus.textContent = '‚ùå Assets non trouv√©s';
                    assetsStatus.className = 'status error';
                    assetsInfo.textContent = `Erreur ${response.status}: ${response.statusText}`;
                }
            })
            .catch(error => {
                document.getElementById('assets-status').textContent = '‚ùå Erreur de chargement';
                document.getElementById('assets-status').className = 'status error';
                document.getElementById('assets-info').textContent = error.message;
            });
        
        // Test 4: Navigateur
        const browserInfo = document.getElementById('browser-info');
        browserInfo.innerHTML = `
            User Agent: <code>${navigator.userAgent.substring(0, 50)}...</code><br>
            Langue: <code>${navigator.language}</code><br>
            Largeur √©cran: <code>${window.innerWidth}px</code><br>
            Hauteur √©cran: <code>${window.innerHeight}px</code><br>
            Connexion: <code>${navigator.connection ? navigator.connection.effectiveType || 'N/A' : 'N/A'}</code>
        `;
        
        // Test 5: API
        fetch('/api/index.php?action=vehicles&limit=1')
            .then(response => response.json())
            .then(data => {
                const apiStatus = document.getElementById('api-status');
                const apiInfo = document.getElementById('api-info');
                if (data.success) {
                    apiStatus.textContent = '‚úÖ API fonctionnelle';
                    apiStatus.className = 'status ok';
                    apiInfo.textContent = `API r√©pond correctement. ${data.data ? data.data.length : 0} v√©hicule(s) trouv√©(s).`;
                } else {
                    apiStatus.textContent = '‚ö†Ô∏è API avec erreur';
                    apiStatus.className = 'status info';
                    apiInfo.textContent = `Erreur: ${data.error || 'Inconnue'}`;
                }
            })
            .catch(error => {
                document.getElementById('api-status').textContent = '‚ùå API inaccessible';
                document.getElementById('api-status').className = 'status error';
                document.getElementById('api-info').textContent = error.message;
            });
    </script>
</body>
</html>

